---
- name: Criação de usuário
  hosts: all
  remote_user: root
  vars:
    senha: 251211
  tasks: 
    - name: Instalação do pacote whois para gerar a senha
      ansible.builtin.apt:
        name: whois
        state: present
        update_cache: true
    - name: Gerar a senha criptografada 
      ansible.builtin.shell: "mkpasswd --method=sha-512 {{ senha }}"
      register: cripto_pwd
    - name: Verificar a senha
      ansible.builtin.debug:
        msg: "{{ cripto_pwd }}"
